# trading_system/config/backtest.yaml

# Backtesting Configuration
backtest:
  mode: "backtest"
  initial_capital: 1000000
  start_date: "2019-01-01"
  end_date: "2023-12-31"
  commission: 0.001
  slippage: 0.001
  rebalance_frequency: "fortnightly"
  
# Data Configuration
data:
  sources: ["twelvedata", "yfinance", "investpy", "alphavantage"]
  fallback_order: ["twelvedata", "yfinance", "investpy", "alphavantage"]
  start_date: "2005-01-01"
  end_date: "2023-12-31"
  universe: ["RELIANCE.NS", "TCS.NS", "INFY.NS", "HDFCBANK.NS", "HINDUNILVR.NS"]
  data_quality_threshold: 0.8
  auto_download: true
  force_redownload: false

# Feature Engineering
features:
  technical_indicators:
    - "sma_20"
    - "sma_50"
    - "rsi_14"
    - "macd"
    - "bollinger_bands"
    - "atr_14"
  regime_detection:
    method: "hidden_markov_model"
    n_regimes: 3
  normalization: "zscore"

# Model Configuration
models:
  active_models: ["xgboost", "lstm", "arima"]
  walk_forward:
    window_size: 252
    step_size: 21
    min_training_period: 100
  xgboost:
    n_estimators: 1000
    learning_rate: 0.01
    max_depth: 6
    subsample: 0.8
  lstm:
    sequence_length: 60
    units: [50, 25]
    dropout: 0.2
    epochs: 100
    batch_size: 32
  arima:
    order: [1, 1, 1]
    seasonal_order: [1, 1, 1, 12]

# Portfolio Optimization
portfolio:
  optimization_method: "sharpe_maximization"
  constraints:
    max_position_size: 0.1
    max_sector_exposure: 0.3
    max_leverage: 1.0
    min_diversification: 5
  rebalance_frequency: "fortnightly"
  lookback_period: 252

# Risk Management
risk:
  max_daily_loss: 0.02
  max_drawdown: 0.15
  max_position_size: 0.1
  var_confidence: 0.95
  enable_circuit_breakers: true
  stop_loss: 0.05
  take_profit: 0.10

# Execution
execution:
  order_type: "market"
  use_next_open: true
  partial_fills: true
  latency_ms: 100

# Reporting
reporting:
  generate_html_report: true
  save_charts: true
  performance_metrics:
    - "total_return"
    - "sharpe_ratio"
    - "max_drawdown"
    - "win_rate"
    - "volatility"
