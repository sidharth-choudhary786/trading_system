# trading_system/config/shared.yaml

# Shared Configuration (Common to both backtest and production)

# Market Configuration
market:
  currency: "INR"
  timezone: "Asia/Kolkata"
  exchange: "NSE"
  trading_hours:
    start: "09:15:00"
    end: "15:30:00"
  holidays:
    - "2023-01-26" # Republic Day
    - "2023-03-07" # Holi
    - "2023-03-30" # Ram Navami
    - "2023-04-04" # Mahavir Jayanti
    - "2023-04-07" # Good Friday
    - "2023-05-01" # Maharashtra Day
    - "2023-06-29" # Bakri Id
    - "2023-08-15" # Independence Day
    - "2023-09-19" # Ganesh Chaturthi
    - "2023-10-02" # Gandhi Jayanti
    - "2023-10-24" # Dussehra
    - "2023-11-14" # Diwali
    - "2023-11-27" # Gurunanak Jayanti
    - "2023-12-25" # Christmas

# Data Sources Configuration
data_sources:
  twelvedata:
    api_key: "${TWELVEDATA_API_KEY}"
    base_url: "https://api.twelvedata.com"
    rate_limit: 8
  yahoo_finance:
    base_url: "https://query1.finance.yahoo.com"
    timeout: 30
  investpy:
    country: "india"
  alphavantage:
    api_key: "${ALPHAVANTAGE_API_KEY}"
    base_url: "https://www.alphavantage.co/query"

# Feature Engineering Defaults
features:
  technical_indicators:
    sma_periods: [5, 10, 20, 50, 200]
    ema_periods: [12, 26]
    rsi_period: 14
    macd_fast: 12
    macd_slow: 26
    macd_signal: 9
    bollinger_period: 20
    bollinger_std: 2
    atr_period: 14
  regime_detection:
    methods: ["hmm", "kmeans", "gmm"]
    default_method: "hmm"
    n_regimes: 3

# Model Defaults
models:
  common:
    train_test_split: 0.8
    validation_split: 0.2
    random_state: 42
    early_stopping: true
    patience: 10
  ml:
    cv_folds: 5
    scoring: "neg_mean_squared_error"
  deep_learning:
    optimizer: "adam"
    loss: "mse"
    metrics: ["mae"]

# Portfolio Optimization Defaults
portfolio_optimization:
  methods:
    sharpe_maximization:
      risk_free_rate: 0.0
    min_variance:
      target_return: null
    risk_parity:
      risk_contribution: "equal"
  constraints:
    long_only: true
    fully_invested: false
    min_weight: 0.0
    max_weight: 0.1
  solver: "SLSQP"
  max_iterations: 1000

# Risk Management Defaults
risk_management:
  value_at_risk:
    confidence_level: 0.95
    time_horizon: 1
    method: "historical"
  stress_testing:
    scenarios:
      market_crash: -0.20
      high_volatility: 0.03
      interest_rate_shock: 0.02
    correlation_breakdown: true

# Execution Defaults
execution_defaults:
  order_types:
    market:
      priority: "high"
      time_in_force: "day"
    limit:
      priority: "medium"
      time_in_force: "gtc"
    stop:
      priority: "high"
      time_in_force: "day"
  slippage_models:
    constant: 0.001
    volume_based: true
    volatility_based: true

# Performance Metrics
performance_metrics:
  primary:
    - "total_return"
    - "annualized_return"
    - "volatility"
    - "sharpe_ratio"
    - "max_drawdown"
    - "calmar_ratio"
  secondary:
    - "sortino_ratio"
    - "information_ratio"
    - "alpha"
    - "beta"
    - "tracking_error"
    - "win_rate"
    - "profit_factor"

# Logging Configuration
logging:
  format: "%(asctime)s - %(name)s - %(levelname)s - %(message)s"
  date_format: "%Y-%m-%d %H:%M:%S"
  handlers:
    console:
      level: "INFO"
      formatter: "standard"
    file:
      level: "DEBUG"
      formatter: "standard"
      filename: "logs/trading_system.log"
      max_bytes: 10485760
      backup_count: 5
